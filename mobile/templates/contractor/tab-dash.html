<ion-view view-title="Dashboard">
    <ion-nav-buttons side="secondary">
        <button class="button button-icon ion-ios-gear-outline" ng-click="$parent.showPopover($event)"></button>
    </ion-nav-buttons>
    <ion-content>
        <ion-refresher on-refresh="$parent.doAllTaskRefresh()" spinner="spiral"></ion-refresher>
        <ion-list show-delete="false" show-reorder="false" can-swipe="true">
            <div class="item item-divider" style="font-size: 13px;">
                RECENT TASK
                <a ng-if="user.usertype=='proc'" ng-click="$parent.opentaskinprogressModal()" style="float: right;font-size: 13px;" ng-if="$parent.progressData.length > 0">VIEW ALL</a>
            </div>
            <ion-item style="height: 90px;" class="animated fadeInLeft" ng-click="showActiveTask(list)" ng-repeat="list in $parent.progressData | limitTo:3" ng-class="{active: list.id == activeTask.id}">
                <div class="cardrightside">
                    <div class="ion-arrow-left-c" style="margin-top: 33px;color: #c3c3c3;"></div>
                </div>
                <div class="card-sidepad" style="background-color: #c10606;" ng-if="list.priority === 'High'"></div>
                <div class="card-sidepad" ng-if="list.priority === 'Medium'"></div>
                <div class="card-sidepad" style="background-color: #ece505;" ng-if="list.priority === 'Low'"></div>
                <div class="cardin">
                    <div class="card-lbl">{{list.taskname}}</div>
                    <p class="card-lblp">({{list.description}})</p>
                    <p class="card-lblp" style="margin-top: 0px;"><small><i style="color:#0f6ab5;" class="ion-alert-circled"></i> {{list.priority}}</small></p>
                    <div class="row" style="margin-top:-10px;">
                        <div class="col">
                            <p><small><i style="color:#0f6ab5;" class="ion-android-calendar"></i> {{list.deadline | date:'longDate'}}</small></p>
                        </div>
                        <div class="col">
                            <p><small ng-if="list.checkStatus == 'in'"><i style="color:#27980b;" class="ion-checkmark-round"></i> Checked-In</small></p>
                            <p><small ng-if="list.checkStatus == 'out'"><i style="color:#c10606;" class="ion-close-round"></i> Checked-out</small></p>
                        </div>
                    </div>
                </div>
                <ion-option-button class="button button-royal" style="padding: 22px;line-height: 1.5;" ng-click="checkInOut(list)">
                    <small ng-if="list.checkStatus =='in'"><div><i class="icon ion-ios-upload"></i></div><div>Check</div> <div>Out</div></small>
                    <small ng-if="list.checkStatus =='out'"><div><i class="icon ion-ios-download"></i></div><div>Check</div> <div>In</div></small>
                </ion-option-button>
                <ion-option-button class="button button-positive" style="padding: 15px;line-height: 1.5;" ng-click="showCheck(list)">
                    <small><div><i class="icon ion-android-done-all"></i></div><div>Complete</div> <div>task</div></small>
                </ion-option-button>
                <ion-option-button class="button button-balanced" ng-click="deTails(list)" style="padding: 22px;line-height: 1.5;">
                    <small><div><i  class="icon ion-ios-information"></i></div><div>View</div> <div>Details</div></small>
                </ion-option-button>
            </ion-item>
        </ion-list>
        <br>
        <div class="item item-divider" style="font-size: 13px;" ng-if="activeTask">
            PRIORITY TASK
        </div>
        <div class="animated fadeInUp anim6" ng-if="activeTask">
            <div class="card" style="margin-top: 10px;background-color: #efefef;" delegate-handle="taskdetails">
                <div class="carding" ng-class="{'status-red': activeTask.priority == 'High','status-green': activeTask.priority == 'Medium','status-yellow': activeTask.priority == 'Low'}">
                    <label class="cardlabel">{{activeTask.taskname}}</label>
                    <p style="color: rgb(115, 115, 115);">{{activeTask.description}}</p>
                    <div>
                        <div class="cl1">Location
                            <div class="cl2">:</div>
                            <div class="cl3">{{activeTask.location}}</div>
                        </div>
                        <div class="cl1">Deadline
                            <div class="cl2">:</div>
                            <div class="cl3">{{activeTask.deadline}}</div>
                        </div>
                        <div class="cl1">Client
                            <div class="cl2">:</div>
                            <div class="cl3">{{activeTask.requestor}}</div>
                        </div>
                        <div class="cl1">Status
                            <div class="cl2">:</div>
                            <div class="cl3" style="color:#0f6ab5;">In progress</div>
                        </div>
                        <div class="cl1">Priority
                            <div class="cl2">:</div>
                            <div class="cl3"><b ng-class="{'h': activeTask.priority == 'High','m': activeTask.priority == 'Medium','l': activeTask.priority == 'Low'}">{{activeTask.Status}}</b></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ion-content>
</ion-view>
