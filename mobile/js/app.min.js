!function(){"use strict";angular.module("starter",["ionic","ionic-timepicker","ng.deviceDetector","ionic-datepicker","LocalStorageModule","angularMoment","ngMessages","ionic-toast","ion-autocomplete","ngCordova","ngSanitize","ngMask"]).config(["$stateProvider","$urlRouterProvider","ionicTimePickerProvider","$ionicConfigProvider","localStorageServiceProvider",function(t,e,o,l,r){var i={inputTime:60*(new Date).getHours()*60+60*(new Date).getMinutes(),format:12,step:1,setLabel:"Set",closeLabel:"Close"};o.configTimePicker(i),l.backButton.text(""),l.backButton.icon("ion-ios-arrow-left"),l.backButton.previousTitleText(""),l.scrolling.jsScrolling(!0),l.tabs.position("bottom"),l.views.swipeBackEnabled(!1),t.state("login",{url:"/login",templateUrl:"templates/login.html",controller:"LoginCtrl"}).state("forgot",{url:"/forgot",templateUrl:"templates/forgot.html"}).state("vendorInfo",{url:"/vendorinfo",templateUrl:"./templates/application/vendorInfo.html",controller:"VendorInfoCtrl"}).state("vendorRate",{url:"/vendorrate",templateUrl:"./templates/application/vendorRate.html",controller:"VendorRateCtrl"}).state("qualification",{url:"/qualification",templateUrl:"./templates/application/qualification.html",controller:"VendorQualificationCtrl"}).state("sent",{url:"/sent/:id",templateUrl:"./templates/application/sent.html",controller:"sentCtrl"}).state("userprofile",{url:"/userprofile/:userId",templateUrl:"templates/profile.html",controller:"UserProfileCtrl"}).state("adminprofile",{url:"/adminprofile",templateUrl:"templates/adminprofile.html",controller:"AdminProfileCtrl"}),e.otherwise("/login")}])}();
!function(){"use strict";angular.module("starter").config(["$stateProvider",function(t){t.state("tab",{url:"/tab","abstract":!0,templateUrl:"templates/contractor/tabs.html",controller:"ContactorMainCtrl"}).state("tab.dash",{url:"/dash",views:{"tab-dash":{templateUrl:"templates/contractor/tab-dash.html",controller:"ContractorDashCtrl"}}}).state("tab.tasks",{url:"/tasks",views:{"tab-tasks":{templateUrl:"templates/contractor/tab-tasks.html",controller:"ContractorTasksCtrl"}}}).state("tab.reports",{url:"/reports",views:{"tab-reports":{templateUrl:"templates/contractor/tab-report.html",controller:"ContractorReportingCtrl"}}}).state("task-detail",{url:"/tasks/:taskId",templateUrl:"templates/contractor/task-detail.html",controller:"ContractorTaskCtrl"}).state("task-detail-new",{url:"/tasks/:taskId/new",templateUrl:"templates/contractor/task-detail.new.html",controller:"ContractorTaskCtrl"}).state("task-detail-pending",{url:"/tasks/:taskId/pending",templateUrl:"templates/contractor/task-detail.pending.html",controller:"ContractorTaskCtrl"}).state("task-detail-progress",{url:"/tasks/:taskId/progress",templateUrl:"templates/contractor/task-detail.progress.html",controller:"ContractorTaskCtrl"}).state("installationreport",{url:"/installationreport/:taskId",templateUrl:"templates/contractor/installationreport.html",controller:"ContractorReportsCtrl"}).state("sitesurvey",{url:"/sitesurvey/:taskId",templateUrl:"templates/contractor/sitesurvey.html",controller:"ContractorReportsCtrl"}).state("reporting",{url:"/supportreport/:taskId",templateUrl:"templates/contractor/supportreport.html",controller:"ContractorReportsCtrl"}).state("qow",{url:"/qow/:taskId",templateUrl:"templates/contractor/qow.html",controller:"ContractorQOWCtrl"}).state("reportdone2",{url:"/reportdone2/:reportId",templateUrl:"templates/contractor/reportdone2.html",controller:"ContractorReportingCtrl"}).state("reportdone",{url:"/reportdone",templateUrl:"templates/contractor/reportdone.html",controller:"ContractorReportingCtrl"})}])}();
!function(){"use strict";angular.module("starter").config(["$stateProvider",function(t){t.state("tab-procure",{url:"/tabprocure","abstract":!0,templateUrl:"templates/procurement/tabs.html",controller:"ProcurementMainCtrl"}).state("tab-procure.admindash",{url:"/admindash",views:{"tab-admindash":{templateUrl:"templates/procurement/tab-admindash.html",controller:"ProcurementDashCtrl"}}}).state("tab-procure.admintasks",{url:"/admintasks",views:{"tab-admintasks":{templateUrl:"templates/procurement/tab-admintask.html",controller:"ProcurementTasksCtrl"}}}).state("tab-procure.createtask",{url:"/createtask",views:{"tab-create-task":{templateUrl:"templates/procurement/tab-createtask.html",controller:"ProcurementTaskCtrl"}}}).state("tab-procure.adminreport",{url:"/adminreport",views:{"tab-adminreport":{templateUrl:"templates/procurement/tab-adminreport.html",controller:"ProcurementReportingCtrl"}}}).state("procure_task_detail",{url:"/procuretasks/:taskId",templateUrl:"templates/procurement/task-detail.html",controller:"ProcurementTaskCtrl"}).state("procure_reportdone2",{url:"/procurereportdone2/:reportId",templateUrl:"templates/procurement/reportdone2.html",controller:"ProcurementReportsCtrl"}).state("procure_reportdone",{url:"/procurereportdone/:reportId",templateUrl:"templates/procurement/reportdone.html",controller:"ProcurementReportsCtrl"}).state("quotelist",{url:"/quotelist/:taskId",templateUrl:"templates/procurement/quotelist.html",controller:"ProcurementQoutesCtrl"}).state("quotedetails",{url:"/quotedetails",templateUrl:"templates/procurement/qowlist.html",controller:"ChatsCtrl"}).state("approve",{url:"/approve/:quoteId/task/:taskId",templateUrl:"templates/procurement/approve.html",controller:"ProcurementQoutesDetailsCtrl"})}])}();
!function(){"use strict";function o(o,e,n,i,t,r,a,c,s,u,l,d,p){e.ready(function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()});var i=i;i.isDesktop()&&(n.location.href="../desktop.html"),o.currentUser=p.user(),o.showPopoveredit=function(e){o.popover1.show(e)},o.myGoBack=function(){console.log("myGoBack"),r.nextDirection("back"),n.history.back()},o.signOut=function(){d.show({template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),o.$broadcast("closeProfilePopover"),p.logout(),c(function(){d.hide(),s.go("login",null,{reload:!0})},1e3)},o.$on("$stateChangeSuccess",function(e,n,i,t,r){o.currentUser=p.user()}),o.$on("$stateChangeStart",function(o,e,n,i,t){"sent"==i.name&&"login"!==e.name&&o.preventDefault(),"login"==i.name&&"sent"==e.name&&o.preventDefault()})}angular.module("starter").run(o),o.$inject=["$rootScope","$ionicPlatform","$window","deviceDetector","$ionicHistory","$ionicViewSwitcher","localStorageService","$timeout","$state","$ionicNavBarDelegate","$ionicPopup","$ionicLoading","CurrentUser"]}();
!function(){"use strict";function e(e,t,n,o,i,a,r,s,d,c){e.data={username:"",password:"",usertype:""},e.$on("$ionicView.beforeEnter",function(t,n){e.data={username:"",password:"",usertype:""},r.showBackButton(!1)}),e.inputType="password",e.showStr="show",e.hideShowPassword=function(){"password"==e.inputType?(e.inputType="text",e.showStr="hide"):(e.inputType="password",e.showStr="show")},e.login=function(a){if(t.nextDirection("forward"),s.show({template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),_.isEmpty(e.data.username)&&_.isEmpty(e.data.password))s.hide(),o.alert({title:"Invalid Account",template:"Username and Password are required!!!"});else if(_.isEmpty(e.data.username)||_.isEmpty(e.data.password))s.hide(),o.alert({title:"Invalid Account",template:"Username and Password are required!!!"});else{var r=d.login(e.data.username,e.data.password),l=c.login(e.data.username,e.data.password);if(console.log("result",r),console.log("result2",l),!_.isNull(r))return void i(function(){s.hide(),a.$setPristine(),n.go("tab-procure.admindash")},1e3);if(!_.isNull(l))return void i(function(){s.hide(),a.$setPristine(),n.go("tab.dash")},1e3);_.isNull(r)?i(function(){s.hide(),o.alert({title:"Invalid Account",template:"Username and Password not match!!!"})},600):_.isNull(l)&&i(function(){s.hide(),o.alert({title:"Invalid Account",template:"Username and Password not match!!!"})},600)}},e.applyAsContractor=function(){console.log("applyAsContractor"),t.nextDirection("forward"),n.go("vendorInfo")}}function t(e,t,n,o){e.sent=function(){o.nextViewOptions({disableBack:!0}),t.nextDirection("forward"),n.go("login")}}angular.module("starter").controller("LoginCtrl",e).controller("sentCtrl",t),t.$inject=["$scope","$ionicViewSwitcher","$state","$ionicHistory"],e.$inject=["$scope","$ionicViewSwitcher","$state","$ionicPopup","$timeout","$ionicHistory","$ionicNavBarDelegate","$ionicLoading","ProcurementManager","Contractor"]}();
!function(){"use strict";function i(i,o,t,c,e,n,r,u,$){}angular.module("starter").controller("AccountCtrl",i),i.$inject=["$scope","$ionicModal","$ionicPopup","$timeout","WeekDays","ionicTimePicker","$state","$ionicHistory","$ionicViewSwitcher"]}();
!function(){"use strict";angular.module("starter").controller("ChatsCtrl",["$scope","$ionicPopover","$state","$timeout","$ionicViewSwitcher","$ionicModal","$ionicPopup","$filter","localStorageService","Tasks","$stateParams","$ionicListDelegate",function(t,e,o,n,i,s,a,l,c,r,u,p){t.$on("$ionicView.enter",function(l){t.progressData=[],t.pendingData=[],t.completedData=[],t.progress=!1,t.date=new Date,t["delete"]=!0,t.delete2=!0,t.delete3=!0,t.delete4=!0,t.contacts=[],t.toggles=[{state:!0},{state:!1},{state:!0}],t.tasklist=r.all(),console.log("tasks: ",t.tasklist),t.selectedTask=t.tasklist[0],t.isa=!1,t.duha=!1,t.tulo=!1,t.opat=!1,t.clickable=function(){console.log("padulong diri")},e.fromTemplateUrl("../mobile/templates/dialog/popadmin.html",{scope:t}).then(function(e){t.popover2=e}),t.showPopoveradmin=function(e){t.popover2.show(e)},t.showActiveTask=function(e){t.selectedTask=e,console.log("$scope.selectedTask: ",t.selectedTask)},t.completedTask=function(t){i.nextDirection("forward"),n(function(){o.go("completedtask")},100)},t.clickDecline=function(e){t.popover.hide(),i.nextDirection("back"),n(function(){o.go("tab.tasks")},100)},t.showConfirm=function(){a.confirm({title:"",template:"Are you sure you want to assign the task to Lorem Impatsu?"}).then(function(t){t?(i.nextDirection("forward"),o.go("approve")):console.log("You are not sure")})},t.quotsub=function(){a.confirm({title:"",template:"Submit Quote?"}).then(function(t){t?(i.nextDirection("back"),o.go("tab.tasks")):console.log("You are not sure")})},t.complete=function(){console.log("$stateParams:",u.id);var e=r.get(u.id);console.log("result:",e),e&&a.confirm({title:"",template:"Send report?",buttons:[{text:"NO"},{text:"YES",type:"button-positive",onTap:function(n){n?(console.log("asdasdasd"),_.map(t.tasklist,function(t){t==e&&(t.Task="complete",o.go("tab.tasks"))}),t.progress=_.filter(t.tasklist,function(t){return"progress"==t.Task}),localStorage.setItem("tasklist",angular.toJson(t.tasklist))):console.log("You are not sure")}}]})},t.checkInOut=function(e){console.log("list:",e);var o=[],n=_.find(t.tasklist,function(t){return"in"==t.Check});_.isUndefined(n)||o.push(n),"in"==e.Check?a.confirm({title:"<h4>Check-out to pause task</h4>",templateUrl:"../mobile/templates/dialog/checkout.html",buttons:[{text:"NO"},{text:"YES",type:"button-positive",onTap:function(o){o&&(console.log("asdasdasd"),_.map(t.tasklist,function(t){t==e&&(t.Check="out")}),localStorage.setItem("tasklist",angular.toJson(t.tasklist)),p.closeOptionButtons())}}]}):1==o.length?a.alert({template:"You are currently check-in to other task. <br> Please check-out."}):a.confirm({title:"<h4>Check-in to resume task</h4>",templateUrl:"../mobile/templates/dialog/checkin.html",buttons:[{text:"NO"},{text:"YES",type:"button-positive",onTap:function(o){o?(_.map(t.tasklist,function(t){t==e&&(t.Check="in")}),localStorage.setItem("tasklist",angular.toJson(t.tasklist))):console.log("You are not sure")}}]})},t.showCheck=function(t){console.log("showCheck"),"High"==t.Status?a.show({title:"<h4>Check-out to complete task</h4>",templateUrl:"../mobile/templates/dialog/checkout.html",buttons:[{text:"NO"},{text:"YES",type:"button-positive",onTap:function(e){e?(i.nextDirection("forward"),o.go("installationreport",{id:t.id},{reload:!1})):console.log("You are not sure")}}]}):"Medium"==t.Status?a.confirm({title:"<h4>Check-out to complete task</h4>",templateUrl:"../mobile/templates/dialog/checkout.html",buttons:[{text:"NO"},{text:"YES",type:"button-positive",onTap:function(e){e?(i.nextDirection("forward"),o.go("reporting",{id:t.id},{reload:!1})):console.log("You are not sure")}}]}):"Low"==t.Status&&a.confirm({title:"<h4>Check-out to complete task</h4>",templateUrl:"../mobile/templates/dialog/checkout.html",buttons:[{text:"NO"},{text:"YES",type:"button-positive",onTap:function(e){e?(i.nextDirection("forward"),o.go("sitesurvey",{id:t.id},{reload:!1})):console.log("You are not sure")}}]})},t.deTails=function(t){i.nextDirection("forward"),o.go("task-detail",{taskId:t.id})},t.add=function(e){var o=_.filter(t.tasklist,function(t){return"progress"==t.Task});console.log("result:",o),o.length>2?a.alert({template:"You are currently check-in to 3 task. <br> Please check-out."}):(a.confirm({title:"<h4>Check-in to start task</h4>",templateUrl:"../mobile/templates/dialog/checkin.html"}).then(function(o){o?(_.map(t.tasklist,function(t){t==e&&(t.Task="progress")}),t.pending=_.filter(t.tasklist,function(t){return"pending"==t.Task}),t.tasklist.splice(e,0)):console.log("You are not sure")}),console.log("$scope.tasklist1:",t.tasklist))},t["delete"]=function(){a.confirm({title:"",template:"Are you sure you want to close task?",buttons:[{text:"NO"},{text:"YES",type:"button-positive",onTap:function(e){e&&(t["delete"]=!1)}}]}),console.log("$scope.tasklist1:",t.tasklist)},t.delete2=function(){a.confirm({title:"",template:"Are you sure you want to close task?",buttons:[{text:"NO"},{text:"YES",type:"button-positive",onTap:function(e){e&&(t.delete2=!1)}}]}),console.log("$scope.tasklist1:",t.tasklist)},t.delete3=function(){a.confirm({title:"",template:"Are you sure you want to decline task?",buttons:[{text:"NO"},{text:"YES",type:"button-positive",onTap:function(e){e&&(t.delete3=!1)}}]}),console.log("$scope.tasklist1:",t.tasklist)},t.delete4=function(){a.confirm({title:"",template:"Are you sure you want to decline task?",buttons:[{text:"NO"},{text:"YES",type:"button-positive",onTap:function(e){e&&(t.delete4=!1)}}]}),console.log("$scope.tasklist1:",t.tasklist)},t.filter={direct:!1,check:!0,check1:!1},t.showModerate=function(){t.filter={direct:!0,check:!1,check1:!1}},t.showHigh=function(){t.filter={direct:!1,check:!0,check1:!1}},t.showLow=function(){t.filter={direct:!1,check:!1,check1:!0}},t.supportreport=function(e){t.popover.hide(),i.nextDirection("forward"),n(function(){o.go("reporting"),t.popover.remove()},100)},t.editpro=function(e){t.popover.hide(),i.nextDirection("forward"),n(function(){o.go("editpro"),t.popover.remove()},100)},t.editavailability=function(e){t.popover.hide(),i.nextDirection("forward"),n(function(){o.go("editavailability"),t.popover.remove()},100)},t.editrate=function(e){t.popover.hide(),i.nextDirection("forward"),n(function(){o.go("editrate"),t.popover.remove()},100)},t.sitesurvey=function(e){t.popover.hide(),i.nextDirection("forward"),n(function(){o.go("sitesurvey")},100)},s.fromTemplateUrl("../mobile/templates/dialog/addmaterial.html",{scope:t,animation:"slide-in-up"}).then(function(e){t.modal=e}),t.openModal=function(){t.modal.show()},t.closeModal=function(){t.modal.hide()},t.createContact=function(e){t.contacts.push({name:e.firstName,description:e.description,rate:e.rate}),t.modal.hide()},_.each(t.chats,function(e){"progress"==e.status?t.progressData.push(e):"pending"==e.status?t.pendingData.push(e):"completed"==e.status&&t.completedData.push(e)}),console.log("$scope.progressData: ",t.progressData),console.log("$scope.pendingData: ",t.pendingData),console.log("$scope.completedData: ",t.completedData)})}])}();
!function(){"use strict";function a(a,e,t,i,r,o,n,s,l,c,u,d,m,v,f,g){a.data={},a.data.availabilityArr=[],a.data.coverageArr=[],a.avail={},a.area={},a.weekdays=r.all(),a.countries=n.all(),a.cities=[],a.citiesCopy=[],a.groups=[],a.othersList=[],a.$on("$ionicView.afterEnter",function(e,t){var i=JSON.parse(v.get("tmpvendor"))||{};_.isEmpty(i)?(a.data.username=_.trim(_.lowerCase(a.data.lname))+"."+_.trim(_.lowerCase(a.data.fname)),a.data.password="123456"):(a.data=i,a.data.username=_.trim(_.lowerCase(a.data.lname))+"."+_.trim(_.lowerCase(a.data.fname)),a.data.password="123456")}),a.goBackLogin=function(){d.nextViewOptions({disableBack:!0}),m.nextDirection("back"),u.go("login")},a.getCountryState=function(e){"AUS"==e?a.states=o.all():a.states=[]},a.getCityState=function(e){console.log("getCityState: ",e),s.all(e).then(function(e){a.cities=e.data;var t=0;_.each(a.cities,function(e){a.citiesCopy.push({id:t,name:e.place_name,view:e.place_name}),t++})})},a.callbackMethod=function(e){if(e){var t=f("filter")(a.citiesCopy,e);return{items:t}}return{items:[]}},a.itemsClicked=function(e){a.data.check_city=e.item.name},a.addArea=function(e){console.log("item: ",e),e&&(a.data.coverageArr.push({area:e}),a.area.coverage="")},a.increaseHours=function(){a.time.hours=Number(a.time.hours),12==a.mainObj.format&&(12!=a.time.hours?a.time.hours+=1:a.time.hours=1),24==a.mainObj.format&&(a.time.hours=(a.time.hours+1)%24),a.time.hours=a.time.hours<10?"0"+a.time.hours:a.time.hours},a.openTime=function(e){a.data.created=new Date,c.openTimePicker({callback:function(e){var t=Math.floor(e/60/60),i=e/60%60;a.data.created.setHours(t,i);var r=(a.data.created.getHours(),t>=12?"PM":"AM");t%=12,t=t?t:12,i=i<10?"0"+i:i,a.avail.start=t+":"+i+" "+r},inputTime:60*a.data.created.getHours()*60+60*a.data.created.getMinutes(),format:12})},a.openTime2=function(){var e=new Date;c.openTimePicker({callback:function(t){var i=Math.floor(t/60/60),r=t/60%60;e.setHours(i,r);var o=(e.getHours(),i>=12?"PM":"AM");i%=12,i=i?i:12,r=r<10?"0"+r:r,a.avail.end=i+":"+r+" "+o},inputTime:60*e.getHours()*60+60*e.getMinutes(),format:12})},a.openTime3=function(a){var e=new Date;c.openTimePicker({callback:function(t){var i=Math.floor(t/60/60),r=t/60%60;e.setHours(i,r);var o=(e.getHours(),i>=12?"PM":"AM");i%=12,i=i?i:12,r=r<10?"0"+r:r,a.start=i+":"+r+" "+o},inputTime:60*e.getHours()*60+60*e.getMinutes(),format:12})},a.openTime4=function(a){var e=new Date;c.openTimePicker({callback:function(t){var i=Math.floor(t/60/60),r=t/60%60;e.setHours(i,r);var o=(e.getHours(),i>=12?"PM":"AM");i%=12,i=i?i:12,r=r<10?"0"+r:r,a.end=i+":"+r+" "+o},inputTime:60*e.getHours()*60+60*e.getMinutes(),format:12})},a.addSched=function(e){e&&(a.data.availabilityArr.push({availability:e.availability,start:e.start,end:e.end}),a.avail.availability="",a.avail.start="",a.avail.end="")},a.showCancel=function(){t.confirm({title:"",template:"Are you sure you want to cancel application?"}).then(function(a){a&&(d.nextViewOptions({disableBack:!0}),m.nextDirection("back"),v.remove("tmpvendor"),u.go("login"))})},a.vendorinf=function(e){if(e.$valid){if(_.isUndefined(a.area.coverage)&&a.data.coverageArr.length<1)return void g.show("Area of Coverage are required!","top",!1,2500);if(_.isUndefined(a.avail.availability)&&a.data.availabilityArr.length<1)return void g.show("Availability are required!","top",!1,2500);a.avail.availability&&(a.data.availabilityArr.push({availability:a.avail.availability,start:a.avail.start,end:a.avail.end}),a.avail.availability="",a.avail.start="",a.avail.end=""),a.area.coverage&&(a.data.coverageArr.push({area:a.area.coverage}),a.area.coverage=""),a.data.username=_.trim(_.lowerCase(a.data.lname))+"."+_.trim(_.lowerCase(a.data.fname)),a.data.password="123456",v.set("tmpvendor",JSON.stringify(a.data)),u.go("vendorRate")}}}angular.module("starter").controller("VendorInfoCtrl",a),a.$inject=["$scope","$ionicModal","$ionicPopup","$timeout","WeekDays","States","Country","CityState","Dummy","ionicTimePicker","$state","$ionicHistory","$ionicViewSwitcher","localStorageService","$filter","ionicToast"]}();
!function(){"use strict";function t(t,a,e,n,i,o,c,r,d,s,l,u,m,f,p,h){t.data={},t.rate={},t.banks=[],t.banksCopy=[],t.currencies=[],t.countries=c.all(),t.cities=[],t.citiesCopy=[],t.$on("$ionicView.afterEnter",function(a,e){var n=JSON.parse(f.get("tmpvendorrate"))||{};_.isEmpty(n)?(t.data.direct=!0,t.data.standard=!0,t.data.other=!1):t.data=n}),a.fromTemplateUrl("../mobile/templates/dialog/termandcondition.html",{scope:t,animation:"slide-in-up"}).then(function(a){t.modal=a}),i.all().then(function(a){t.banks=a.data,_.each(t.banks,function(a){t.banksCopy.push({id:a.id,name:a.name,view:a.name})})}),o.all().then(function(a){var e=a.data;n(function(){t.$apply(function(){t.currencies=e})},10)}),t.openModal=function(){t.modal.show()},t.closeModal=function(){t.modal.hide()},t.getCountryState=function(a){"AUS"==a?t.states=d.all():t.states=[]},t.getCityState=function(a){r.all(a).then(function(a){t.cities=a.data;var e=0;_.each(t.cities,function(a){t.citiesCopy.push({id:e,name:a.place_name,view:a.place_name}),e++})})},t.callbackMethod=function(a){if(a){var e=p("filter")(t.banksCopy,a);return{items:e}}return{items:[]}},t.callbackCityMethod=function(a){if(a){var e=p("filter")(t.citiesCopy,a);return{items:e}}return{items:[]}},t.itemsCityClicked=function(a){t.data.city=a.item.name},t.itemsClicked=function(a){t.data.bankname=a.item.name},t.callbackMethod=function(a){if(a){var e=p("filter")(t.banksCopy,a);return{items:e}}return{items:[]}},t.itemsClicked=function(a){t.data.bankname=a.item.name},t.vendorRate=function(a){a.$valid&&(t.data.standard||(t.data.ratestandard=""),t.data.other||(t.data.other_base_hours="",t.data.other_after_hours="",t.data.other_weekends=""),t.data.direct||(t.data.bankaccount="",t.data.bankaccountnum="",t.data.bankbranch="",t.data.bankbsb="",t.data.bankname=""),t.data.check||t.data.check_prefer_info||(t.data.check_country="",t.data.check_state="",t.data.check_city="",t.data.check_address="",t.data.check_postcode=""),f.set("tmpvendorrate",JSON.stringify(t.data)),l.go("qualification"))},t.showCancel=function(){e.confirm({title:"",template:"Are you sure you want to cancel application?"}).then(function(t){t&&(u.nextViewOptions({disableBack:!0}),m.nextDirection("back"),f.remove("tmpvendor"),f.remove("tmpvendorrate"),l.go("login"))})}}angular.module("starter").controller("VendorRateCtrl",t),t.$inject=["$scope","$ionicModal","$ionicPopup","$timeout","Banks","Currencies","Country","CityState","States","Dummy","$state","$ionicHistory","$ionicViewSwitcher","localStorageService","$filter","$ionicNavBarDelegate"]}();
!function(){"use strict";function e(e,t,o,i,n,a,r,c,s,l,p,u,m,f,d){e.data={},e.data.qualifications=[],e.data.othersList=[],e.others={},e.groups=[],e.filenames=[],e.qualifications=f.all(),_.each(e.qualifications,function(e){e.checked=!1}),e.$on("$ionicView.afterEnter",function(t,o){var i=JSON.parse(r.get("tmpqualification"))||{};_.isEmpty(i)||(e.data=i)});for(var g=0;g<1;g++){e.groups[g]={name:g,items:[]};for(var h=0;h<1;h++)e.groups[g].items.push(g+"-"+h)}e.toggleGroup=function(t){e.isGroupShown(t)?e.shownGroup=null:e.shownGroup=t},e.isGroupShown=function(t){return e.shownGroup===t},e.removeOther=function(t){e.othersList.splice(t,1)},e.addOthers=function(t){_.isEmpty(t)||(e.othersList.push(t),e.others={})},e.uploadFiles=function(t){var i=t.files,n=[];for(g=0;g<i.length;g++)n.push(i[g].name);e.files=i,o(function(){e.$apply(function(){e.filenames=n})},10),console.log(i,n)},e.removetest=function(t){e.filenames.splice(t,1)},e.checkItem=function(e){e.checked&&console.log("row: ",e)},e.scanCertificateCamera=function(){var e=ionic.Platform.isWebView();ionic.Platform.platform();if(e)t.alert({title:"Invalid Platform",template:"Scanning using Camera is not available at this platform"});else if(window.cordova&&window.cordova.plugins){var o={quality:50,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!0,encodingType:Camera.EncodingType.JPEG,targetWidth:100,targetHeight:100,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!1,correctOrientation:!0};u.getPicture(o).then(function(e){var t="data:image/jpeg;base64,"+e;console.log("image: ",t)},function(e){})}else t.alert({title:"Invalid Platform",template:"Scanning using Camera is not available at this platform"})},e.showCancel=function(){t.confirm({title:"",template:"Are you sure you want to cancel application?"}).then(function(e){e&&(n.nextViewOptions({disableBack:!0}),a.nextDirection("back"),r.remove("tmpvendor"),r.remove("tmpvendorrate"),i.go("login"))})},e.showConfirm=function(){t.confirm({title:"",template:"Are you sure you want to submit application?"}).then(function(t){if(t){l.show({template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),n.nextViewOptions({disableBack:!0}),a.nextDirection("forward");var c=JSON.parse(r.get("tmpvendor"))||{},s=JSON.parse(r.get("tmpvendorrate"))||{},p=_.extend(c,s,e.data);e.data=p,d.create(e.data).then(function(e){console.log("resp: ",e),e&&o(function(){l.hide(),r.remove("tmpvendor"),r.remove("tmpvendorrate"),i.go("sent",{id:c._id})},1e3)})}})}}angular.module("starter").controller("VendorQualificationCtrl",e),e.$inject=["$scope","$ionicPopup","$timeout","$state","$ionicHistory","$ionicViewSwitcher","localStorageService","$filter","$ionicNavBarDelegate","$ionicLoading","$ionicPopover","$cordovaCamera","Dummy","Qualifications","Contractor"]}();
!function(){"use strict";function e(e,r,o,n){console.log("UserProfileCtrl: "),e.profile={},e.$on("$ionicView.beforeEnter",function(t,s){console.log("stateParams.userId: ",r.userId),_.isUndefined(r.userId)?e.profile=o.user():n.findById(r.userId).then(function(r){r&&r.length>0&&(e.profile=r[0])})})}angular.module("starter").controller("UserProfileCtrl",e),e.$inject=["$scope","$stateParams","CurrentUser","Contractor"]}();
!function(){"use strict";function e(e,r){e.profile={},e.$on("$ionicView.beforeEnter",function(n,o){e.profile=r.user()})}angular.module("starter").controller("AdminProfileCtrl",e),e.$inject=["$scope","CurrentUser"]}();
!function(){"use strict";function t(t,e,o,n,i,s,c,a,l,r){t.selectedTask={},t.activeTask=t.$parent.progressData[0],t.toggle=!0,t.showActiveTask=function(e){t.activeTask=e,o(function(){c.scrollBottom(!0)},100)},t.toggleCheckInOut=function(){t.toggle=!t.toggle},t.checkInOut=function(e){t.selectedTask=e;var n=_.filter(t.$parent.tasklist,function(t){return"in"==t.checkStatus});if("in"==e.checkStatus)i.confirm({title:"<h4>Check-out to pause task</h4>",templateUrl:"./templates/dialog/checkout.html",scope:t,buttons:[{text:"Cancel",onTap:function(t){s.closeOptionButtons()}},{text:"OK",type:"button-positive",onTap:function(n){n?(console.log("$scope.toggle: ",t.toggle),a.show({template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),s.closeOptionButtons(),_.each(e.quotes,function(e){e.contractor._id==l.user()._id&&e.approved&&(e.status="progress",t.toggle&&(e.check="out"))}),r.findByIdAndUpdate(e._id,e).then(function(e){e&&o(function(){a.hide(),i.alert({title:"",template:"Task checked out"}).then(function(e){t.$parent.doAllTaskRefresh()})},1e3)})):s.closeOptionButtons()}}]});else{if(n.length>=1)return s.closeOptionButtons(),void i.alert({template:"You are currently check-in to other task. <br> Please check-out."});i.confirm({title:"<h4>Check-in to resume task</h4>",templateUrl:"../mobile/templates/dialog/checkin.html",scope:t,buttons:[{text:"NO",onTap:function(t){s.closeOptionButtons()}},{text:"YES",type:"button-positive",onTap:function(n){n?(a.show({template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),s.closeOptionButtons(),console.log("$scope.toggle: ",t.toggle),_.each(e.quotes,function(e){e.contractor._id==l.user()._id&&e.approved&&(e.status="progress",t.toggle?e.check="out":e.check="in")}),r.findByIdAndUpdate(e._id,e).then(function(e){e&&o(function(){a.hide(),i.alert({title:"",template:"Task checked in"}).then(function(e){t.$parent.doAllTaskRefresh()})},1e3)})):s.closeOptionButtons()}}]})}},t.showCheck=function(c){t.selectedTask=task,i.show({title:"<h4>Check-out to complete task</h4>",templateUrl:"../mobile/templates/dialog/checkout.html",buttons:[{text:"NO",onTap:function(t){s.closeOptionButtons()}},{text:"YES",type:"button-positive",onTap:function(t){t?(s.closeOptionButtons(),n.nextDirection("forward"),a.show({template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),o(function(){a.hide(),"High"==c.Status?e.go("installationreport",{taskId:c.id}):"Medium"==c.Status?e.go("reporting",{taskId:c.id}):"Low"==c.Status&&e.go("sitesurvey",{taskId:c.id})},1e3)):s.closeOptionButtons()}}]})},t.deTails=function(t){s.closeOptionButtons(),n.nextDirection("forward"),o(function(){e.go("task-detail-progress",{taskId:t._id})},250)}}angular.module("starter").controller("ContractorDashCtrl",t),t.$inject=["$scope","$state","$timeout","$ionicViewSwitcher","$ionicPopup","$ionicListDelegate","$ionicScrollDelegate","$ionicLoading","CurrentUser","Tasks"]}();
!function(){"use strict";function t(t,e,o,n,i,s,c,a,r){t.selectedTask={},t.toggle=!0,t.$on("$ionicView.afterEnter",function(e,o){t.$parent.doAllTaskRefresh()}),t.$on("showTaskInfo",function(e,o){t.$parent.closependingModal(),t.$parent.closenewtaskModal(),t.$parent.closecompleted_ContractorModal(),t.deTails(o.type,o.taskId)}),t.$on("startTaskPending",function(e,o){t.startTask(o.taskId)}),t.checkInOut=function(e){console.log("task: ",e),t.selectedTask=e;var n=_.filter(t.$parent.tasklist,function(t){return"in"==t.checkStatus});if("in"==e.checkStatus)i.confirm({title:"<h4>Check-out to pause task</h4>",templateUrl:"./templates/dialog/checkout.html",scope:t,buttons:[{text:"Cancel",onTap:function(t){s.closeOptionButtons()}},{text:"OK",type:"button-positive",onTap:function(n){n?(console.log("$scope.toggle: ",t.toggle),c.show({template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),s.closeOptionButtons(),_.each(e.quotes,function(e){e.contractor._id==a.user()._id&&e.approved&&(e.status="progress",t.toggle&&(e.check="out"))}),r.findByIdAndUpdate(e._id,e).then(function(e){e&&o(function(){c.hide(),i.alert({title:"",template:"Task checked out"}).then(function(e){t.$parent.doAllTaskRefresh()})},1e3)})):s.closeOptionButtons()}}]});else{if(n.length>=1)return s.closeOptionButtons(),void i.alert({template:"You are currently check-in to other task. <br> Please check-out."});i.confirm({title:"<h4>Check-in to resume task</h4>",templateUrl:"../mobile/templates/dialog/checkin.html",scope:t,buttons:[{text:"NO",onTap:function(t){s.closeOptionButtons()}},{text:"YES",type:"button-positive",onTap:function(n){n?(c.show({template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),s.closeOptionButtons(),_.each(e.quotes,function(e){e.contractor._id==a.user()._id&&e.approved&&(e.status="progress",t.toggle?e.check="out":e.check="in")}),r.findByIdAndUpdate(e._id,e).then(function(e){e&&o(function(){c.hide(),i.alert({title:"",template:"Task checked in"}).then(function(e){t.$parent.doAllTaskRefresh()})},1e3)})):s.closeOptionButtons()}}]})}},t.completeTask=function(o){t.selectedTask=o,i.show({title:"<h4>Check-out to complete task</h4>",templateUrl:"../mobile/templates/dialog/checkout.html",scope:t,buttons:[{text:"NO",onTap:function(t){s.closeOptionButtons()}},{text:"YES",type:"button-positive",onTap:function(t){t?(c.show({template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),s.closeOptionButtons(),c.hide(),"High"==o.priority?e.go("installationreport",{taskId:o._id}):"Medium"==o.priority?e.go("reporting",{taskId:o._id}):"Low"==o.priority&&e.go("sitesurvey",{taskId:o._id})):s.closeOptionButtons()}}]})},t.completedTask=function(t){n.nextDirection("forward"),o(function(){e.go("completedtask")},100)},t.showConfirm=function(){i.confirm({title:"",template:"Are you sure you want to assign the task to Lorem Impatsu?"}).then(function(t){t&&(n.nextDirection("forward"),e.go("approve"))})},t.clickDecline=function(t){i.confirm({title:"Decline Task?",template:"Are you sure you want to decline on this task?",buttons:[{text:"NO"},{text:"YES",type:"button-positive",onTap:function(n){if(n){c.show({template:'<p>Declining...</p><ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),s.closeOptionButtons();var l=0;_.each(t.quotes,function(e){e.contractor._id==a.user()._id&&(t.quotes.splice(l,1),l++)}),r.findByIdAndUpdate(t._id,t).then(function(t){t&&o(function(){c.hide(),i.alert({title:"",template:"Task successfully declined"}).then(function(t){e.reload()})},600)})}}}]})},t.deTails=function(t,i){s.closeOptionButtons(),n.nextDirection("forward"),o(function(){"progress"==t?e.go("task-detail-progress",{taskId:i._id}):"pending"==t?e.go("task-detail-pending",{taskId:i._id}):"new"==t?e.go("task-detail-new",{taskId:i._id}):"completed"==t&&e.go("task-detail",{taskId:i._id})},250)},t.toggleCheckInOut=function(){t.toggle=!t.toggle},t.startTask=function(n){t.selectedTask=n;var l=0;return _.each(t.$parent.progressData,function(t){_.each(t.quotes,function(t){t.contractor._id==a.user()._id&&t.approved&&(l++,console.log("onWork: ",l))})}),console.log("onWork1: ",l),l>=3?void i.alert({template:"You are currently check-in to 3 task. <br> Please check-out."}):void i.confirm({title:"<h4>Check-in to start task</h4>",templateUrl:"./templates/dialog/checkin.html",scope:t,buttons:[{text:"Cancel",onTap:function(t){s.closeOptionButtons()}},{text:"OK",type:"button-positive",onTap:function(l){if(l){var u=_.filter(t.tasklist,function(t){return"in"==t.checkStatus});if(u.length>=1)return s.closeOptionButtons(),void i.alert({template:"You are currently check-in to other task. <br> Please check-out."});c.show({template:'<p>Starting...</p><ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),s.closeOptionButtons(),_.each(n.quotes,function(e){e.contractor._id==a.user()._id&&e.approved&&(e.status="progress",t.toggle?e.check="out":e.check="in")}),r.findByIdAndUpdate(n._id,n).then(function(t){t&&o(function(){c.hide(),i.alert({title:"",template:"Task checked in"}).then(function(t){e.go(e.current,null,{reload:!0})})},1e3)})}else s.closeOptionButtons()}}]})},t.newTaskqow=function(i){t.$parent.closenewtaskModal(),n.nextDirection("forward"),s.closeOptionButtons(),o(function(){e.go("qow",{taskId:i._id})},250)},t.$on("submitQOW",function(e,o){t.$parent.closependingModal(),t.newTaskqow(o.taskId)}),t.$on("declineTaskOW",function(e,o){t.clickDecline(o.taskId)}),t.doTaskRefresh=function(){o(function(){t.$broadcast("scroll.refreshComplete")},2e3)}}angular.module("starter").controller("ContractorTasksCtrl",t),t.$inject=["$scope","$state","$timeout","$ionicViewSwitcher","$ionicPopup","$ionicListDelegate","$ionicLoading","CurrentUser","Tasks"]}();
!function(){"use strict";function t(t,e,n,i,o,a,s,c,r){t.task={},t.tasklist=[],t.disableQOW=!1,t.selectedTask={},t.$on("$ionicView.beforeEnter",function(e,n){o.taskId&&(i.findById(o.taskId).then(function(e){t.task=e[0]}),t.$watch("task",function(e){t.task=e,_.each(t.task.quotes,function(e){e.contractor._id==r.user()._id&&(console.log("disableQOW"),t.disableQOW=!0)}),console.log("$scope.task: ",t.task)}))}),t.viewPSD=function(t){},t.submitQOW=function(t){s.nextDirection("forward"),n(function(){e.go("qow",{taskId:t._id})},250)},t.declineTask=function(u){a.confirm({title:"Decline Task?",template:"Are you sure you want to decline on this task?"}).then(function(u){if(u){c.show({template:'<p>Declining...</p><ion-spinner icon="android" class="spinner-positive"></ion-spinner>'});var l=0;_.each(t.task.quotes,function(e){e.contractor._id==r.user()._id&&(t.task.quotes.splice(l,1),l++)}),i.findByIdAndUpdate(o.taskId,t.task).then(function(t){t&&n(function(){c.hide(),a.alert({title:"",template:"Task successfully declined"}).then(function(t){s.nextDirection("back"),e.go("tab.tasks")})},600)})}})},t.startTask=function(o){t.selectedTask=o;var s=0;return _.each(t.$parent.pendingData,function(t){_.each(t.quotes,function(t){t.contractor._id==r.user()._id&&t.approved&&s++})}),s>=3?void a.alert({template:"You are currently check-in to 3 task. <br> Please check-out."}):void a.confirm({title:"<h4>Check-in to start task</h4>",templateUrl:"./templates/dialog/checkin.html",scope:t,buttons:[{text:"Cancel"},{text:"OK",type:"button-positive",onTap:function(s){if(s){var u=_.filter(t.$parent.tasklist,function(t){return"in"==t.checkStatus});if(u.length>=1)return $ionicListDelegate.closeOptionButtons(),void a.alert({template:"You are currently check-in to other task. <br> Please check-out."});c.show({template:'<p>Starting...</p><ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),$ionicListDelegate.closeOptionButtons(),_.each(o.quotes,function(e){e.contractor._id==r.user()._id&&e.approved&&(e.status="progress",t.toggle?e.check="out":e.check="in")}),i.findByIdAndUpdate(o._id,o).then(function(t){t&&n(function(){c.hide(),a.alert({title:"",template:"Task checked in"}).then(function(t){e.go("tab.tasks",null,{reload:!0})})},1e3)})}}}]})}}angular.module("starter").controller("ContractorTaskCtrl",t),t.$inject=["$scope","$state","$timeout","Tasks","$stateParams","$ionicPopup","$ionicViewSwitcher","$ionicLoading","CurrentUser"]}();
!function(){"use strict";function t(t,n,e,o,a,i,s,r,c){console.log("ContractorReportsCtrl");var l,u;t.task={},t.assignee={},t.tasklist=[],t.currentDate=new Date,t.signature=void 0,t.filter1={yes:!1,no:!1,na:!1},t.filter2={yes:!1,no:!1,na:!1},t.filter3={yes:!1,no:!1,na:!1},t.filter4={yes:!1,no:!1,na:!1},t.filter5={yes:!1,no:!1,na:!1},t.filter6={yes:!1,no:!1,na:!1},t.filter7={yes:!1,no:!1,na:!1},t.filter8={yes:!1,no:!1,na:!1},t.filter9={yes:!1,no:!1,na:!1},t.outstandingissue="",t.test1={pass:!1,fail:!1},t.test1={pass:!1,fail:!1},t.$on("$ionicView.beforeEnter",function(n,e){a.taskId&&o.findById(a.taskId).then(function(n){t.task=n[0],_.each(t.task.quotes,function(n){n.contractor._id==i.user()._id&&(t.assignee=n.contractor)})})}),t.$watch("task",function(n){t.task=n,console.log("$scope.task: ",t.task)}),t.$watch("filter1",function(t){console.log("$scope.filter1: ",t)}),s.fromTemplateUrl("./templates/dialog/signature.modal.html",{scope:t,animation:"slide-in-up"}).then(function(n){t.signatureModal=n}),t.openSignatureModal=function(){t.signatureModal.show(),l=document.getElementById("signatureCanvas"),u=new SignaturePad(l),u.minWidth=1,u.maxWidth=1.5,u.dotSize=3,u.backgroundColor="rgb(255, 255, 255)"},t.closeSignatureModal=function(){t.signatureModal.hide()},t.clearCanvas=function(){u.clear()},t.saveCanvas=function(){if(void 0!=u){var n=u.toDataURL("image/png");t.signature=n}},t.$on("$destroy",function(){t.signatureModal.remove(),t.signature=void 0}),t.$on("modal.hidden",function(){t.signature=void 0}),t.complete=function(){r.confirm({title:"",template:"Send report?",buttons:[{text:"NO"},{text:"YES",type:"button-positive",onTap:function(a){a&&(c.show({template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),n(function(){c.hide(),_.each(t.task.quotes,function(t){t.contractor._id==i.user()._id&&t.approved&&(t.status="completed",t.check="out")}),t.task.completed=new Date,o.findByIdAndUpdate(t.task._id,t.task).then(function(t){t&&n(function(){r.alert({title:"",template:"Task successfully completed"}).then(function(t){e.go("tab.tasks",null,{reload:!0})})},1e3)})},1e3))}}]})}}angular.module("starter").controller("ContractorReportsCtrl",t),t.$inject=["$scope","$timeout","$state","Tasks","$stateParams","CurrentUser","$ionicModal","$ionicPopup","$ionicLoading"]}();
!function(){"use strict";function t(t,a,e,o,n,i,s,r,d,l){function c(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}t.contacts=[],t.newUser={},t.data={},t.data.totalrate=0,t.data.numhours=0,t.data.totalqoute=0,t.data.material_fee=0,t.data.parking_fee=0,t.data.material_fee=0,t.data.travel_fee=0,t.data.descriptions=[],t.data.contractor={},t.data.approved=!1,t.task={},t.task.quotes=[],i.fromTemplateUrl("./templates/dialog/addmaterial.html",{scope:t,animation:"slide-in-up"}).then(function(a){t.modal=a}),t.$on("modal.hidden",function(){t.newUser={},t.calculateTotal()}),i.fromTemplateUrl("./templates/dialog/qow.modal.html",{scope:t,animation:"slide-in-up"}).then(function(a){t.previewModal=a}),n.taskId&&(t.task={},t.task.quotes=[],o.findById(n.taskId).then(function(a){t.task=a[0]})),t.$watch("task",function(a){t.task={},t.task.quotes=[],t.task=a,console.log("$scope.task: ",t.task)}),t.openModal=function(){t.modal.show()},t.closeModal=function(){t.modal.hide()},t.calculateRate=function(a){t.data.totalrate=45*a,t.calculateTotal()},t.calculateTotal=function(){var a=0,e=parseFloat(t.data.totalrate)+parseFloat(t.data.material_fee)+parseFloat(t.data.parking_fee)+parseFloat(t.data.travel_fee);_.each(t.data.descriptions,function(t){a+=parseFloat(t.rate)}),t.data.totalqoute=e+a},t.createContact=function(a){a&&(t.data.descriptions.push({name:a.itemName,description:a.description,rate:a.rate}),t.modal.hide())},t.previewQoute=function(a){t.previewModal.show()},t.quotsub=function(){s.confirm({title:"",template:"Submit Quote?"}).then(function(i){i&&(l.show({template:'<p>Sending...</p><ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),t.data._id=c(),t.data.contractor=d.user(),_.isUndefined(t.task.quotes)?(t.task.quotes=[],t.task.quotes.push(t.data)):t.task.quotes.push(t.data),console.log("$scope.task: ",t.task),o.findByIdAndUpdate(n.taskId,t.task).then(function(t){t&&a(function(){l.hide(),s.alert({title:"",template:"Quote successfully send.."}).then(function(t){r.nextDirection("back"),e.go("tab.tasks")})},600)}))})}}angular.module("starter").controller("ContractorQOWCtrl",t),t.$inject=["$scope","$timeout","$state","Tasks","$stateParams","$ionicModal","$ionicPopup","$ionicViewSwitcher","CurrentUser","$ionicLoading"]}();
!function(){"use strict";function o(o,e,t,n,r,i,c,p){o.reportdone2=function(e){o.$parent.closerecentreportModal(),o.$parent.closemyreportModal(),p.closeOptionButtons(),r.nextDirection("forward"),n(function(){t.go("reportdone2",{reportId:e.id})},250)},o.downloadReport=function(o){e.show({template:'<p>Downloading...</p><ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),p.closeOptionButtons(),n(function(){e.hide(),i.alert({title:"",template:"Report has been downloaded"})},2e3)},o.doReportingRefresh=function(){n(function(){o.$broadcast("scroll.refreshComplete")},2e3)},o.$on("showReportInfo",function(e,t){o.reportdone2(t.reportId)}),o.$on("downloadReportInfo",function(e,t){o.downloadReport(t.reportId)}),c.reportId&&(o.doReportRefresh=function(){n(function(){o.$broadcast("scroll.refreshComplete")},2e3)})}angular.module("starter").controller("ContractorReportingCtrl",o),o.$inject=["$scope","$ionicLoading","$state","$timeout","$ionicViewSwitcher","$ionicPopup","$stateParams","$ionicListDelegate"]}();
!function(){"use strict";function o(o,e,t,n,a,r,s,i,l,c,d){o.progressData=[],o.pendingData=[],o.completedData=[],o.newTaskData=[],o.reportsData=[],o.tasklist=[],s.find().then(function(e){o.tasklist=e}),o.$watch("tasklist",function(e){console.log("tasklist: ",e),o.progressData=[],o.pendingData=[],o.completedData=[],o.newTaskData=[],_.each(e,function(e){var t=_.find(e.contractors,{_id:l.user()._id});t&&o.newTaskData.push(e)}),_.each(o.newTaskData,function(e){e.disableQOW=!1,_.each(e.quotes,function(t){t.contractor._id==l.user()._id&&(e.disableQOW=!0,t.approved&&"progress"!=t.status&&"completed"!=t.status&&o.pendingData.push(e),t.approved&&"progress"==t.status&&o.progressData.push(e),t.approved&&"completed"==t.status&&o.completedData.push(e))})}),_.each(o.pendingData,function(e){_.remove(o.newTaskData,function(o){return o._id==e._id})}),_.each(o.progressData,function(e){_.remove(o.newTaskData,function(o){return o._id==e._id}),_.remove(o.pendingData,function(o){return o._id==e._id}),_.remove(o.completedData,function(o){return o._id==e._id}),_.each(e.quotes,function(o){o.contractor._id==l.user()._id&&("in"==o.check?e.checkStatus="in":e.checkStatus="out")})}),_.each(o.completedData,function(e){_.remove(o.newTaskData,function(o){return o._id==e._id})}),o.$broadcast("scroll.refreshComplete")}),o.reportsData=i.all(),o.showReportDetails=function(e){console.log("showReportDetails: ",e),o.$broadcast("showReportInfo",{reportId:e})},o.downloadReportDetails=function(e){console.log("downloadReportDetails: ",e),o.$broadcast("downloadReportInfo",{reportId:e})},o.showTaskDetails=function(e,t){console.log("showTaskDetails"),o.$broadcast("showTaskInfo",{type:e,taskId:t})},o.startPendingTask=function(e){o.$broadcast("startTaskPending",{taskId:e})},o.doAllTaskRefresh=function(){o.progressData=[],o.pendingData=[],o.completedData=[],o.newTaskData=[],s.find().then(function(e){o.tasklist=e})},o.doMyReportsRefresh=function(){c(function(){o.$broadcast("scroll.refreshComplete")},2e3)},n.fromTemplateUrl("./templates/dialog/editpro.html",{rootScope:a}).then(function(o){a.popover1=o}),n.fromTemplateUrl("./templates/dialog/profilePopOver.html",{scope:o}).then(function(e){o.mainPopover=e}),o.showPopover=function(e){o.mainPopover.show(e)},o.showUserProfile=function(t){o.mainPopover.hide(),d.nextDirection("forward"),e.go("userprofile")},a.$on("closeProfilePopover",function(){o.mainPopover.hide()}),r.fromTemplateUrl("./templates/dialog/progress.html",{scope:o,animation:"slide-in-up"}).then(function(e){o.progressModal=e}),o.opendetailsModal=function(){console.log("opendetailsModal"),o.progressModal.show()},o.closeModal=function(){o.progressModal.hide()},r.fromTemplateUrl("./templates/dialog/contractor_taskinprogress.html",{scope:o,animation:"slide-in-up"}).then(function(e){o.taskinprogressModal=e}),o.opentaskinprogressModal=function(){o.taskinprogressModal.show()},o.closetaskinprogressModal=function(){o.taskinprogressModal.hide()},a.$on("closetaskinprogressModal",function(){console.log("closetaskmodal"),o.taskinprogressModal.hide()}),r.fromTemplateUrl("./templates/dialog/contractor_pending.html",{scope:o,animation:"slide-in-up",controller:"ContractorDashCtrl"}).then(function(e){o.pendingModal=e}),o.openpendingModal=function(){o.pendingModal.show()},o.closependingModal=function(){o.pendingModal.hide()},o.$on("closependingModal",function(){o.pendingModal.hide()}),r.fromTemplateUrl("./templates/dialog/contractor_newtask.html",{scope:o,animation:"slide-in-up"}).then(function(e){o.newtaskModal=e}),o.opennewtaskModal=function(){o.newtaskModal.show()},o.closenewtaskModal=function(){o.newtaskModal.hide()},o.submitQOW=function(e){o.$broadcast("submitQOW",{taskId:e})},o.declineTask=function(e){o.$broadcast("declineTaskOW",{taskId:e})},r.fromTemplateUrl("./templates/dialog/contractor_completed.html",{scope:o,animation:"slide-in-up"}).then(function(e){o.contractor_completed=e}),o.opencompleted_ContactorModal=function(){o.contractor_completed.show()},o.closecompleted_ContractorModal=function(){o.contractor_completed.hide()},r.fromTemplateUrl("./templates/dialog/contractor_recentlysentreport.html",{scope:o,animation:"slide-in-up"}).then(function(e){o.recentreportModal=e}),o.openrecentreportModal=function(){console.log("openrecentreportModal"),o.recentreportModal.show()},o.closerecentreportModal=function(){o.recentreportModal.hide()},r.fromTemplateUrl("./templates/dialog/contractor_myreports.html",{scope:o,animation:"slide-in-up"}).then(function(e){o.myreportModal=e}),o.openmyreportModal=function(){console.log("openmyreportModal"),o.myreportModal.show()},o.closemyreportModal=function(){o.myreportModal.hide()},o.$on("closemyreportModal",function(){o.myreportModal.hide()})}angular.module("starter").controller("ContactorMainCtrl",o),o.$inject=["$scope","$state","localStorageService","$ionicPopover","$rootScope","$ionicModal","Tasks","Reports","CurrentUser","$timeout","$ionicViewSwitcher"]}();
!function(){"use strict";function t(t,n,i,e,o,r){t.data={},t.$on("$ionicView.afterEnter",function(i,e){r.findById(n.id).then(function(n){n&&n.length>0&&(t.data=n[0])})}),t.sent=function(){o.nextViewOptions({disableBack:!0}),i.nextDirection("forward"),e.go("login")}}angular.module("starter").controller("sentCtrl",t),t.$inject=["$scope","$stateParams","$ionicViewSwitcher","$state","$ionicHistory","Contractor"]}();
!function(){"use strict";function o(o,e,t,n,a,r,s,i,l,c,p,d){o.progressData=[],o.pendingData=[],o.completedData=[],o.newTaskData=[],o.reportsData=[],o.tasklist=[],o.$on("$ionicView.enter",function(e,t){o.progressData=[],o.pendingData=[],o.completedData=[],o.newTaskData=[],o.tasklist=[],s.find().then(function(e){_.each(e,function(e){e.reporter.id==c.user().id&&(o.tasklist.push(e),console.log("row: ",e._id))})})}),o.$watch("tasklist",function(e){o.newTaskData=e,_.each(o.newTaskData,function(e){var t=0,n=0,a=0;_.each(e.quotes,function(o){o.approved&&"progress"!=o.status&&"completed"!=o.status&&t++,o.approved&&"progress"==o.status&&a++,o.approved&&"completed"==o.status&&n++,_.isUndefined(o.check)||"in"!=o.check?_.isUndefined(o.check)||"out"!=o.check||(e.checkStatus="out"):e.checkStatus="in"}),t>0&&(o.pendingData.push(e),t=0),a>0&&(o.progressData.push(e),a=0),n>0&&(o.completedData.push(e),n=0)}),_.each(o.pendingData,function(e){_.remove(o.newTaskData,function(o){return o._id==e._id})}),_.each(o.progressData,function(e){_.remove(o.newTaskData,function(o){return o._id==e._id}),_.remove(o.pendingData,function(o){return o._id==e._id}),_.remove(o.completedData,function(o){return o._id==e._id})}),_.each(o.completedData,function(e){_.remove(o.newTaskData,function(o){return o._id==e._id})}),o.$broadcast("scroll.refreshComplete")}),o.reportsData=i.all(),console.log(o.reportsData),o.showReportDetails=function(e){console.log("showReportDetails: ",e),o.$broadcast("showReportInfo",{reportId:e})},o.showReportDetails2=function(e){console.log("showReportDetails: ",e),o.$broadcast("showReportInfo2",{reportId:e})},o.downloadReportDetails=function(e){console.log("downloadReportDetails: ",e),o.$broadcast("downloadReportInfo",{reportId:e})},o.showTaskDetails=function(e){o.$broadcast("showTaskInfo",{taskId:e})},o.showQOWList=function(e){o.$broadcast("showQOWInfo",{taskId:e})},o.closeTaskDetails=function(e){o.$broadcast("closeTaskCompleted",{taskId:e})},o.doAllTaskRefresh=function(){o.progressData=[],o.pendingData=[],o.completedData=[],o.newTaskData=[],o.tasklist=[],s.find().then(function(e){_.each(e,function(e){e.reporter.id==c.user().id&&o.tasklist.push(e)})})},n.fromTemplateUrl("./templates/dialog/editpro.html",{rootScope:a}).then(function(o){a.popover1=o}),n.fromTemplateUrl("./templates/dialog/profilePopOver.html",{scope:o}).then(function(e){o.mainPopover=e}),o.showPopover=function(e){o.mainPopover.show(e)},o.showAdminProfile=function(){o.mainPopover.hide(),d.nextDirection("forward"),e.go("adminprofile")},a.$on("closeProfilePopover",function(){o.mainPopover.hide()}),r.fromTemplateUrl("./templates/dialog/progress.html",{scope:o,animation:"slide-in-up"}).then(function(e){o.progressModal=e}),o.opendetailsModal=function(){console.log("opendetailsModal"),o.progressModal.show()},o.closeModal=function(){o.progressModal.hide()},r.fromTemplateUrl("./templates/dialog/procurement_taskinprogress.html",{scope:o,animation:"slide-in-up"}).then(function(e){o.taskinprogressModal=e}),o.opentaskinprogressModal=function(){o.taskinprogressModal.show()},o.closetaskinprogressModal=function(){o.taskinprogressModal.hide()},r.fromTemplateUrl("./templates/dialog/procurement_pending.html",{scope:o,animation:"slide-in-up",controller:"ContractorDashCtrl"}).then(function(e){o.procurement_PendingModal=e}),o.openProcPendingModal=function(){o.procurement_PendingModal.show()},o.closeProcPendingModal=function(){o.procurement_PendingModal.hide()},r.fromTemplateUrl("./templates/dialog/procurement_newtask.html",{scope:o,animation:"slide-in-up"}).then(function(e){o.newtaskModal=e}),o.opennewtaskModal=function(){o.newtaskModal.show()},o.closenewtaskModal=function(){o.newtaskModal.hide()},o.submitQOW=function(e){o.$broadcast("submitQOW",{taskId:e})},o.declineTask=function(e){o.$broadcast("declineTaskOW",{taskId:e})},r.fromTemplateUrl("./templates/dialog/procurement_completed.html",{scope:o,animation:"slide-in-up"}).then(function(e){o.completedTaskModal=e}),o.opencompletedModal=function(){o.completedTaskModal.show()},o.closecompletedModal=function(){o.completedTaskModal.hide()},r.fromTemplateUrl("./templates/dialog/procurement_recentlysentreport.html",{scope:o,animation:"slide-in-up"}).then(function(e){o.recentreportModal=e}),o.openrecentreportModal=function(){console.log("openrecentreportModal"),o.recentreportModal.show()},o.closerecentreportModal=function(){o.recentreportModal.hide()},r.fromTemplateUrl("./templates/dialog/procurement_myreports.html",{scope:o,animation:"slide-in-up"}).then(function(e){o.myreportModal=e}),o.openmyreportModal=function(){o.myreportModal.show()},o.closemyreportModal=function(){o.myreportModal.hide()}}angular.module("starter").controller("ProcurementMainCtrl",o),o.$inject=["$scope","$state","localStorageService","$ionicPopover","$rootScope","$ionicModal","Tasks","Reports","Contractor","CurrentUser","$timeout","$ionicViewSwitcher"]}();
!function(){"use strict";function o(o,e,t,c,n,i,r,s,a,l){o.$on("$ionicView.afterEnter",function(e,t){o.selectedTask=o.$parent.progressData[0]}),o.showActiveTask=function(e){o.selectedTask=e,c(function(){l.scrollBottom(!0)},100)},o.deTails=function(o){console.log("list: ",o),a.closeOptionButtons(),n.nextDirection("forward"),c(function(){t.go("procure_task_detail",{taskId:o._id})},250)},o.$on("showTaskInfo",function(e,t){a.closeOptionButtons(),o.$parent.closetaskinprogressModal(),o.deTails(t.taskId)}),o.doTaskRefresh=function(){c(function(){o.$broadcast("scroll.refreshComplete")},2e3)},o.clickme=function(){o.model=!0},o.filter={direct:!1,check:!0,check1:!1},o.showModerate=function(){o.filter={direct:!0,check:!1,check1:!1}},o.showHigh=function(){o.filter={direct:!1,check:!0,check1:!1}},o.showLow=function(){o.filter={direct:!1,check:!1,check1:!0}},o.completedTask=function(o){n.nextDirection("forward"),c(function(){t.go("completedtask")},100)},o.forApproval=function(o){n.nextDirection("forward"),c(function(){t.go("forapproval")},100)},o.pendingDetails=function(e){o.popover.hide(),n.nextDirection("forward"),c(function(){t.go("pendingtask")},100)},o.createTask=function(o){o.$valid&&console.log("form valid")}}angular.module("starter").controller("ProcurementDashCtrl",o),o.$inject=["$scope","$ionicPopover","$state","$timeout","$ionicViewSwitcher","$ionicModal","localStorageService","$ionicPopup","$ionicListDelegate","$ionicScrollDelegate"]}();
!function(){"use strict";function t(t,e,o,n,a,c,i,r,s,u,l,p,d,k,f){t.task={},t.task.contractors=[],t.completeTask=!1,t.taskTypes=[],t.priorities=[],t.contractorData=[],t.contractors=[],r.find().then(function(e){t.contractorData=e,_.each(t.contractorData,function(t){t.checked=!1});for(var o=0;o<=2;o++)_.isUndefined(t.contractorData[o])||t.contractors.push(t.contractorData[o])}),f.fromTemplateUrl("../mobile/templates/dialog/contractor.list.modal.html",{scope:t,animation:"slide-in-up"}).then(function(e){t.modalcontractor=e}),t.$on("$ionicView.afterEnter",function(e,o){s.taskId?n.findById(s.taskId).then(function(e){t.task=e[0]}):(t.task={},t.task.contractors=[],t.taskTypes=a.all(),t.priorities=a.priorities(),t.contractorData=[],t.contractors=[],r.find().then(function(e){t.contractorData=e,_.each(t.contractorData,function(t){t.checked=!1});for(var o=0;o<=2;o++)_.isUndefined(t.contractorData[o])||t.contractors.push(t.contractorData[o])}))}),t.$watch("task",function(e){t.task=e,t.task.reporter=i.user(),_.isUndefined(t.task.completed)||(t.completeTask=!0)}),t.qowlist=function(t){d.nextDirection("forward"),e(function(){o.go("quotelist",{taskId:t._id})},250)},t.openContractorModal=function(){t.modalcontractor.show()},t.closeContractorModal=function(){t.modalcontractor.hide()},t.addContractoTask=function(e){console.log("con: ",e.checked),e.checked?t.task.contractors.push(e):_.remove(t.task.contractors,function(t){return t._id==e._id}),console.log("$scope.task.contractors: ",t.task.contractors)},t.attachedFile=function(){},t.openDatePicker=function(){u.openDatePicker({callback:function(e){console.log("Return value from the datepicker popup is sssss: "+e,new Date(e));var o=new Date(e);t.task.deadline=moment(o).format("MM-DD-YYYY")},inputDate:new Date,mondayFirst:!0,closeOnSelect:!1,templateType:"popup"})},t.openTime=function(){var e=new Date;l.openTimePicker({callback:function(o){var n=Math.floor(o/60/60),a=o/60%60;e.setHours(n,a);var c=(e.getHours(),n>=12?"PM":"AM");n%=12,n=n?n:12,a=a<10?"0"+a:a,t.task.start=n+":"+a+" "+c},inputTime:60*e.getHours()*60+60*e.getMinutes(),format:12})},t.openTime2=function(){var e=new Date;l.openTimePicker({callback:function(o){var n=Math.floor(o/60/60),a=o/60%60;e.setHours(n,a);var c=(e.getHours(),n>=12?"PM":"AM");n%=12,n=n?n:12,a=a<10?"0"+a:a,t.task.end=n+":"+a+" "+c},inputTime:60*e.getHours()*60+60*e.getMinutes(),format:12})},t.openDateRequestedPicker=function(){u.openDatePicker({callback:function(e){console.log("Return value from the datepicker popup is sssss: "+e,new Date(e));var o=new Date(e);t.task.date_requested=moment(o).format("MM-DD-YYYY")},inputDate:new Date,mondayFirst:!0,closeOnSelect:!1,templateType:"popup"})},t.cancelCreateTask=function(){p.confirm({title:"",template:"Are you sure you want to cancel creating task?",buttons:[{text:"NO"},{text:"YES",type:"button-positive",onTap:function(n){n&&(k.show({template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),e(function(){k.hide(),t.task={},d.nextDirection("back"),o.go("tab-procure.admintasks")},1e3))}}]})},t.createTask=function(a){console.log(t.task.deadline),a.$valid&&(_.isEmpty(t.task)||(k.show({template:'<p>Sending...</p><ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),e(function(){k.hide(),t.task.reporter=i.user(),a.$setPristine(),n.create(t.task).then(function(t){t&&p.alert({title:"",template:"Your task has been sent"}).then(function(t){d.nextDirection("back"),o.go("tab-procure.admintasks",null,{reload:!0})})})},1e3)))},t.closeTask=function(t){p.confirm({title:"",template:"Are you sure you want to close task?",buttons:[{text:"NO"},{text:"YES",type:"button-positive",onTap:function(t){t&&(k.show({template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),e(function(){k.hide(),p.alert({title:"",template:"Task has been closed"}).then(function(){o.reload()})},1e3))}}]})}}angular.module("starter").controller("ProcurementTaskCtrl",t),t.$inject=["$scope","$timeout","$state","Tasks","TaskTypes","Dummy","CurrentUser","Contractor","$stateParams","ionicDatePicker","ionicTimePicker","$ionicPopup","$ionicViewSwitcher","$ionicLoading","$ionicModal"]}();
!function(){"use strict";function t(t,n,o,e,s,i,a,c,l,r){t.$on("$ionicView.beforeEnter",function(n,o){t.$parent.doAllTaskRefresh()}),t.$on("showTaskInfo",function(n,o){s.closeOptionButtons(),t.$parent.closetaskinprogressModal(),t.$parent.closeProcPendingModal(),t.$parent.closenewtaskModal(),t.$parent.closecompletedModal(),t.deTails(o.taskId)}),t.$on("startTaskPending",function(n,o){t.startTask(o.taskId)}),t.$on("showQOWInfo",function(n,o){s.closeOptionButtons(),t.$parent.closenewtaskModal(),t.qowlist(o.taskId)}),t.$on("closeTaskCompleted",function(n,o){s.closeOptionButtons(),t.closeTask(o.taskId)}),t.startTask=function(n){var o=_.filter(t.tasklist,function(t){return"progress"==t.Task});o.length>2?(s.closeOptionButtons(),a.alert({template:"You are currently check-in to 3 task. <br> Please check-out."})):a.confirm({title:"<h4>Check-in to start task</h4>",templateUrl:"./templates/dialog/checkin.html"}).then(function(o){o&&(_.map(t.tasklist,function(t){t==n&&(t.Task="progress")}),t.pending=_.filter(t.tasklist,function(t){return"pending"==t.Task}),t.tasklist.splice(n,0),s.closeOptionButtons())})},t.deTails=function(t){s.closeOptionButtons(),i.nextDirection("forward"),n(function(){o.go("procure_task_detail",{taskId:t._id})},250)},t.qowlist=function(t){s.closeOptionButtons(),i.nextDirection("forward"),n(function(){o.go("quotelist",{taskId:t._id})},250)},t.closeTask=function(o){a.confirm({title:"",template:"Are you sure you want to close task?",buttons:[{text:"NO",onTap:function(t){s.closeOptionButtons()}},{text:"YES",type:"button-positive",onTap:function(o){o?(c.show({template:'<ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),s.closeOptionButtons(),n(function(){c.hide(),a.alert({title:"",template:"Task has been closed"}).then(function(){t.$parent.closecompletedModal()})},1e3)):s.closeOptionButtons()}}]})}}angular.module("starter").controller("ProcurementTasksCtrl",t),t.$inject=["$scope","$timeout","$state","$stateParams","$ionicListDelegate","$ionicViewSwitcher","$ionicPopup","$ionicLoading","CurrentUser","Tasks"]}();
!function(){"use strict";function o(o,e,t,n,r,i,c,p,d,a,l){o.reportdone2=function(e){o.$parent.closerecentreportModal(),o.$parent.closemyreportModal(),l.closeOptionButtons(),r.nextDirection("forward"),n(function(){t.go("procure_reportdone2",{reportId:e.id})},250)},o.reportdone=function(e){o.$parent.closerecentreportModal(),o.$parent.closemyreportModal(),l.closeOptionButtons(),r.nextDirection("forward"),t.go("procure_reportdone",{reportId:e.id})},o.downloadReport=function(o){e.show({template:'<p>Downloading...</p><ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),n(function(){e.hide(),c.alert({title:"",template:"Report has been downloaded"}).then(function(){l.closeOptionButtons()})},2e3)},o.doReportingRefresh=function(){n(function(){o.$broadcast("scroll.refreshComplete")},2e3)},o.$on("showReportInfo2",function(e,t){o.reportdone2(t.reportId)}),o.$on("showReportInfo",function(e,t){o.reportdone(t.reportId)}),o.$on("downloadReportInfo",function(e,t){o.downloadReport(t.reportId)}),a.reportId&&(o.doReportRefresh=function(){n(function(){o.$broadcast("scroll.refreshComplete")},2e3)})}angular.module("starter").controller("ProcurementReportingCtrl",o),o.$inject=["$scope","$ionicLoading","$state","$timeout","$ionicViewSwitcher","$ionicModal","$ionicPopup","$filter","localStorageService","$stateParams","$ionicListDelegate"]}();
!function(){"use strict";function n(n,e,o,i,t,a){n.dimage=function(n){t.show({template:'<p>Downloading...</p><ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),e(function(){t.hide(),a.alert({title:"",template:"Images downloaded"})},2e3)},n.downloadReport=function(n){t.show({template:'<p>Downloading...</p><ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),e(function(){t.hide(),a.alert({title:"",template:"Report has been downloaded"})},2e3)}}angular.module("starter").controller("ProcurementReportsCtrl",n),n.$inject=["$scope","$timeout","$state","$stateParams","$ionicLoading","$ionicPopup"]}();
!function(){"use strict";function t(t,o,e,n,a,i,s,r,c,u,d,l,f){t.$on("$ionicView.beforeEnter",function(o,e){d.taskId&&(u.findById(d.taskId).then(function(o){t.task=o[0]}),t.$watch("task",function(o){t.task=o,console.log("$scope.quotes: ",t.task.quotes),_.each(t.task.quotes,function(t){var o=0;_.each(t.descriptions,function(t){o+=parseFloat(t.rate)}),t.grossothers=o,t.totalothers=parseFloat(t.material_fee)+parseFloat(t.parking_fee)+parseFloat(t.travel_fee)+parseFloat(t.grossothers)})}))}),t.showConfirm=function(o){s.confirm({title:"",template:"Are you sure you want to assign the task to "+o.contractor.fname+" "+o.contractor.lname+" ?"}).then(function(i){i?(f.show({template:'<p>Approving...</p><ion-spinner icon="android" class="spinner-positive"></ion-spinner>'}),_.each(t.task.quotes,function(t){t._id==o._id&&(t.approved=!0)}),u.findByIdAndUpdate(d.taskId,t.task).then(function(i){i&&n(function(){f.hide(),s.alert({title:"",template:"Quote successfully approved"}).then(function(n){a.nextDirection("forward"),e.go("approve",{quoteId:o._id,taskId:t.task._id})})},1e3)})):console.log("You are not sure")})},t.viewApproval=function(o){a.nextDirection("forward"),e.go("approve",{quoteId:o._id,taskId:t.task._id})},t.gotToProfile=function(t){console.log("user: ",t._id),a.nextDirection("forward"),e.go("userprofile",{userId:t._id})}}function o(t,o,e,n,a){t.task={},t.data={},t.$on("$ionicView.beforeEnter",function(o,a){n.quoteId&&(e.findById(n.taskId).then(function(o){t.task=o[0]}),t.$watch("task",function(o){t.task=o,t.data=_.find(t.task.quotes,{_id:n.quoteId}),t.data.totalMisc=parseFloat(t.data.parking_fee)+parseFloat(t.data.travel_fee),console.log("$scope.qoute: ",t.data)}))}),t.gotToProfile=function(t){console.log("user: ",t._id),a.nextDirection("forward"),o.go("userprofile",{userId:t._id})}}angular.module("starter").controller("ProcurementQoutesCtrl",t).controller("ProcurementQoutesDetailsCtrl",o),t.$inject=["$scope","$ionicPopover","$state","$timeout","$ionicViewSwitcher","$ionicModal","$ionicPopup","$filter","localStorageService","Tasks","$stateParams","$ionicListDelegate","$ionicLoading"],o.$inject=["$scope","$state","Tasks","$stateParams","$ionicViewSwitcher"]}();
!function(){"use strict";angular.module("starter").factory("CurrentUser",["localStorageService",function(n){return{user:function(){var e=JSON.parse(n.get("user"))||{};return _.isEmpty(e)?null:e},logout:function(){var e=JSON.parse(n.get("user"))||{};return _.isEmpty(e)?null:n.remove("user")}}}]).factory("Reports",function(){var n=[{id:1,Title:"Network Setup",Description:"7-Eleven",Status:"High",location:"Sydney CDB",datecompleted:"2016-01-01",client:"7-Eleven"},{id:2,Title:"AV-Installation",Description:"Telstra,Melbourne",Status:"Medium",location:"Sydney CDB",datecompleted:"2016-01-01",client:"7-Eleven"},{id:2,Title:"Hardware-Installation",Description:"Telstra,Melbourne",Status:"Medium",location:"Sydney CDB",datecompleted:"2016-01-01",client:"7-Eleven"}];return{all:function(){return n}}}).factory("TaskTypes",function(){var n=[{id:1,name:"Installation",value:"Installation"},{id:2,name:"Setup",value:"Setup"},{id:3,name:"Testing",value:"Testing"},{id:4,name:"Support",value:"Support"}],e=[{id:1,name:"High",value:"High"},{id:1,name:"Medium",value:"Medium"},{id:1,name:"Low",value:"Low"}];return{all:function(){return n},priorities:function(){return e}}}).factory("WeekDays",function(){var n=[{id:1,name:"Sunday",abbr:"SUN"},{id:2,name:"Monday",abbr:"MON"},{id:3,name:"Tuesday",abbr:"TUE"},{id:4,name:"Wednesday",abbr:"WED"},{id:5,name:"Thursday",abbr:"THU"},{id:6,name:"Friday",abbr:"FRI"},{id:7,name:"Saturday",abbr:"SAT"}];return{all:function(){return n},get:function(e){for(var t=0;t<n.length;t++)if(n[t].id===parseInt(e))return n[t];return null}}}).factory("States",function(){var n=[{id:1,code:"ACT",name:"Australian Capital Territory"},{id:2,code:"NSW",name:"New South Wales"},{id:3,code:"NT",name:"Northern Territory"},{id:4,code:"QLD",name:"Queensland"},{id:5,code:"SA",name:"South Australia"},{id:6,code:"TAS",name:"Tasmania"},{id:7,code:"VIC",name:"Victoria"},{id:8,code:"WA",name:"Western Australia"}];return{all:function(){return n},get:function(e){var t=_.find({id:e},n);return _.isEmpty(t)?null:t}}}).factory("Qualifications",function(){var n=[{id:1,value:"one",name:"Hardware Installations"},{id:2,value:"two",name:"AV-Installations"},{id:3,value:"three",name:"Preventive Maintenance"},{id:4,value:"four",name:"Digital Media and Digital Points of Purchase Rollouts"},{id:5,value:"five",name:"Basic Networking Experience"},{id:6,value:"six",name:"Testing and Servicing Equipment"}];return{all:function(){return n}}}).factory("Country",function(){var n=[{id:1,code:"AUS",name:"Australia"},{id:2,code:"NZ",name:"New Zealand"}];return{all:function(){return n},get:function(e){for(var t=0;t<n.length;t++)if(n[t].id===parseInt(e))return n[t];return null}}}).factory("CityState",["$http",function(n){return{all:function(e){return"ACT"==e?(console.log("state: ",e),n.get("./data/act.json").success(function(n){return n})):"NSW"==e?n.get("./data/nsw.json").success(function(n){return n}):"NT"==e?n.get("./data/nt.json").success(function(n){return n}):"QLD"==e?n.get("./data/qld.json").success(function(n){return n}):"SA"==e?n.get("./data/sa.json").success(function(n){return n}):"VIC"==e?n.get("./data/vic.json").success(function(n){return n}):"WA"==e?n.get("./data/wa.json").success(function(n){return n}):void 0},get:function(n){}}}]).factory("Banks",["$http",function(n){return{all:function(){return n.get("./data/bank.json").success(function(n){return n})},get:function(e){return n.get("./data/bank.json").success(function(n){return n})}}}]).factory("Currencies",["$http",function(n){return{all:function(){return n.get("./data/currency.new.json").success(function(n){return n})},get:function(e){return n.get("./data/currency.new.json").success(function(n){return n})}}}])}();
!function(){"use strict";angular.module("starter").factory("Contractor",["$q","localStorageService",function(e,r){function t(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var o=this;return o.find=function(t){var o=e.defer(),n=[];if(r.isSupported){var s=JSON.parse(r.get("contactor"))||[];s&&s.length>0?_.isEmpty(t)?(n=s,o.resolve(n)):(n=_.filter(s,t),o.resolve(n)):o.resolve(n)}else o.reject("localStorage is not supported");return o.promise},o.create=function(o){var n=e.defer();if(r.isSupported){o._id=t();var s=JSON.parse(r.get("contactor"))||[];if(s&&s.length>0){s.push(o);var i=JSON.stringify(s),a=r.set("contactor",i);n.resolve(a)}else{var i=JSON.stringify([o]),a=r.set("contactor",i);n.resolve(a)}}else n.reject("localStorage is not supported");return n.promise},o.remove=function(){var t=e.defer();if(r.isSupported){var o=r.remove("contactor");t.resolve(o)}else t.reject("localStorage is not supported");return t.promise},o.findById=function(t){var o=e.defer(),n=[];if(r.isSupported){var s=JSON.parse(r.get("contactor"))||[];s&&s.length>0?(n=_.filter(s,{_id:t}),o.resolve(n)):o.resolve(n)}else o.reject("localStorage is not supported");return o.promise},o.findByIdAndRemove=function(t){var o=e.defer(),n=[];if(r.isSupported){var s=JSON.parse(r.get("contactor"))||[];s&&s.length>0?(n=_.filter(s,function(e){return e._id!==quotes._id}),o.resolve(n)):o.resolve(n)}else o.reject("localStorage is not supported");return o.promise},o.findByIdAndUpdate=function(t,o){var n=e.defer();if(r.isSupported){var s=JSON.parse(r.get("contactor"))||[];if(s&&s.length>0){_.each(s,function(e){e._id==t&&(e=o)});var i=JSON.stringify(s),a=r.set("contactor",i);n.resolve(a)}else n.resolve([])}else n.reject("localStorage is not supported");return n.promise},o.login=function(e,t){var o=JSON.parse(r.get("contactor"))||[],n=_.find(o,{username:e,password:t});return _.isEmpty(n)?null:(delete n.password,r.set("user",JSON.stringify(n)),n)},o}])}();
!function(){"use strict";angular.module("starter").factory("ProcurementManager",["localStorageService",function(e){var t=[{id:1,fname:"John",lname:"Doe",position:"Project Lead",location:{address:"Lorem ipsum dolor sit amet",postcode:"12345",city:"Haymarket",state:"New South Wales",country:"Australia"},contactnum:"0411123236",email:"loren@impatsu.com.au",username:"lorem1",password:"123456",usertype:"proc",datecreated:new Date},{id:2,fname:"Mary",lname:"Poppins",position:"Project Lead",location:{address:"Lorem ipsum dolor sit amet",postcode:"12345",city:"Haymarket",state:"New South Wales",country:"Australia"},contactnum:"0411123236",email:"loren2@impatsu.com.au",username:"lorem2",password:"123456",usertype:"proc",datecreated:new Date},{id:3,fname:"Network",lname:"Eleven",position:"Project Lead",location:{address:"Lorem ipsum dolor sit amet",postcode:"12345",city:"Haymarket",state:"New South Wales",country:"Australia"},contactnum:"0411123236",email:"loren3@impatsu.com.au",username:"lorem3",password:"123456",usertype:"proc",datecreated:new Date},{id:4,fname:"Katrin",lname:"Risse",position:"Project Lead",location:{address:"Lorem ipsum dolor sit amet",postcode:"12345",city:"Haymarket",state:"New South Wales",country:"Australia"},contactnum:"0411123236",email:"katrin.risse@engagis.com.au",username:"katrin.risse",password:"123456",usertype:"proc",datecreated:new Date}];return{all:function(){return t},login:function(a,o){var r=_.find(t,{username:a,password:o});return _.isEmpty(r)?null:(e.set("user",JSON.stringify(r)),r)},findById:function(e){var a=_.find(t,{id:e});return _.isEmpty(a)?null:a}}}])}();
!function(){"use strict";angular.module("starter").factory("Tasks",["$q","localStorageService",function(e,r){function t(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var s=this;return s.find=function(t){var s=e.defer(),o=[];if(r.isSupported){var i=JSON.parse(r.get("tasks"))||[];i&&i.length>0?_.isEmpty(t)?(o=i,s.resolve(o)):(o=_.filter(i,t),s.resolve(o)):s.resolve(o)}else s.reject("localStorage is not supported");return s.promise},s.create=function(s){var o=e.defer();if(r.isSupported){s._id=t();var i=JSON.parse(r.get("tasks"))||[];if(i&&i.length>0){i.push(s);var n=JSON.stringify(i),a=r.set("tasks",n);o.resolve(a)}else{var n=JSON.stringify([s]),a=r.set("tasks",n);o.resolve(a)}}else o.reject("localStorage is not supported");return o.promise},s.remove=function(){var t=e.defer();if(r.isSupported){var s=r.remove("tasks");t.resolve(s)}else t.reject("localStorage is not supported");return t.promise},s.findById=function(t){var s=e.defer(),o=[];if(r.isSupported){var i=JSON.parse(r.get("tasks"))||[];i&&i.length>0?(o=_.filter(i,{_id:t}),s.resolve(o)):s.resolve(o)}else s.reject("localStorage is not supported");return s.promise},s.findByIdAndRemove=function(t){var s=e.defer(),o=[];if(r.isSupported){var i=JSON.parse(r.get("tasks"))||[];i&&i.length>0?(o=_.filter(i,function(e){return e._id!==quotes._id}),s.resolve(o)):s.resolve(o)}else s.reject("localStorage is not supported");return s.promise},s.findByIdAndUpdate=function(t,s){var o=e.defer(),i=[];if(r.isSupported){var n=JSON.parse(r.get("tasks"))||[];if(n&&n.length>0){i=_.filter(n,function(e){return e._id!==t}),i.push(s);var a=JSON.stringify(i),l=r.set("tasks",a);o.resolve(l)}else o.resolve([])}else o.reject("localStorage is not supported");return o.promise},s}])}();
!function(){"use strict";angular.module("starter").factory("Dummy",function(){function a(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}function e(a,e){e=e||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var t="",o=0;o<a;o++){var n=Math.floor(Math.random()*e.length);t+=e.substring(n,n+1)}return t}return{task:function(){return{_id:a(),taskname:"Task -"+Math.round(+new Date/1e3),tasktype:"Support",description:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.",storename:"Target Newton",location:"Gorge Rd, Newton SA 5074, Australia",deadline:"2016-07-14",start:"8:00 AM",end:"3:00 PM",numdays:0,numhours:1,priority:"High",projectname:"Bupa Retail - "+Math.round(+new Date/1e3),casenumber:102807,requestor:"Mardy Romasasa",data_requested:"2016-07-14",storelname:"Jobs",storefname:"Steve",storeconnum:"08 8168 7500",contractors:[],status:""}},report:function(){return{}},vendorinfo:function(){var t="last"+e(2),o="first"+e(2);return{_id:a(),lname:t,fname:o,username:t+"."+o,password:"123456",companyname:"Company-"+e(8),location:"Gorge Rd, Newton SA 5074, Australia",country:"AUS",state:"NSW",city:"Haymarket",address:"Gorge Rd, Newton SA 5074",postcode:Math.floor(9e3*Math.random())+1e3,phone:"61"+(Math.floor(9e9*Math.random())+1e9),abn:Math.floor(9e10*Math.random())+1e10,email:"sample"+(Math.floor(900*Math.random())+100)+"@yopmail.com",seclname:"LName"+e(8),secfname:"FName"+e(8),secphone:parseInt("61"+(Math.floor(9e9*Math.random())+1e9)),secemail:"email"+(Math.floor(900*Math.random())+100)+"@yopmail.com",usertype:"con"}},vendorrate:function(){return{ratestandard:12.5,other_base_hours:12.5,other_after_hours:12.5,other_weekends:12.5,currency:"AUD",check_postcode:Math.floor(9e3*Math.random())+1e3,check_address:"Gorge Rd, Newton SA 5074, Australia",check_country:"AUS",check_state:"NSW",check_city:"Haymarket",bankname:"Advance Bank",bankbranch:e(12),bankaccount:"FName"+e(8)+" LName"+e(8),bankaccountnum:(Math.floor(900*Math.random())+100).toString()+(Math.floor(900*Math.random())+100).toString()+(Math.floor(900*Math.random())+100).toString()+(Math.floor(900*Math.random()).toString()+100)+(Math.floor(900*Math.random())+100).toString(),bankbsb:Math.floor(9e5*Math.random())+1e5}},vendorqualification:function(){return{refLname:"LName"+e(8),refFname:"FName"+e(8),refPhone:"61"+(Math.floor(9e9*Math.random())+1e9),refEmail:"email"+(Math.floor(900*Math.random())+100)+"@yopmail.com",qualifications:[{id:1,value:"one",name:"Hardware Installations",checked:!1},{id:2,value:"two",name:"AV-Installations",checked:!0},{id:3,value:"three",name:"Preventive Maintenance",checked:!1},{id:4,value:"four",name:"Digital Media and Digital Points of Purchase Rollouts",checked:!0},{id:5,value:"five",name:"Basic Networking Experience",checked:!0},{id:6,value:"six",name:"Testing and Servicing Equipment",checked:!1}]}}}})}();
!function(){"use strict";angular.module("starter").directive("errSrc",function(){return{link:function(n,o,e){n.$watch(function(){return e.ngSrc},function(n){n||o.attr("src",e.errSrc)}),o.bind("error",function(){o.attr("src",e.errSrc)})}}}).directive("validNumber",function(){return{require:"?ngModel",link:function(n,o,e,t){t&&o.bind("keypress",function(n){var e=o.val()+(0!==n.charCode?String.fromCharCode(n.charCode):"");0===o.val().search(/(.*)\.[0-9][0-9]/)&&e.length>o.val().length&&n.preventDefault()})}}}).directive("ionFloatingButton",function(){return{restrict:"E",scope:{click:"&?",buttonColor:"@?",buttonClass:"@?",icon:"@?",iconColor:"@?",hasFooter:"=?"},template:'<ul id="floating-button" ng-style="{\'bottom\' : \'{{bottomValue}}\' }"><li ng-class="buttonClass" ng-style="{\'background-color\': buttonColor }"><a ng-click="click()"><i class="icon menu-icon" ng-class="{ \'{{icon}}\' : true}" ng-style="{\'color\': iconColor }"></i></a></li></ul>',replace:!0,transclude:!0,controller:["$scope",function(n){n.buttonColor=n.buttonColor||"#2AC9AA",n.icon=n.icon||"ion-plus",n.iconColor=n.iconColor||"#fff",n.hasFooter=n.hasFooter||!1,n.hasFooter?n.bottomValue="60px":n.bottomValue="20px"}]}}).directive("ionFloatingMenu",function(){return{restrict:"E",scope:{menuOpenColor:"@?",menuOpenIcon:"@?",menuOpenIconColor:"@?",menuColor:"@?",menuIcon:"@?",menuIconColor:"@?",hasFooter:"=?"},template:'<ul id="floating-menu"  \n                            ng-style="{\'bottom\' : \'{{bottomValue}}\'}" \n                            ng-class="{\'active\' : isOpen}" \n                            ng-click="open()"><div ng-transclude></div><span><li class="menu-button icon menu-icon" ng-class="icon" ng-style="{\'background-color\' : buttonColor, \'color\': iconColor}"></li></span></ul>',replace:!0,transclude:!0,link:function(n,o,e,t,i){o.find("div").replaceWith(i())},controller:["$scope",function(n){n.isOpen=!1,n.open=function(){n.isOpen=!n.isOpen,n.isOpen?n.setOpen():n.setClose()},n.setOpen=function(){n.buttonColor=i,n.icon=r,n.iconColor=c},n.setClose=function(){n.buttonColor=o,n.icon=e,n.iconColor=t};var o=n.menuColor||"#2AC9AA",e=n.menuIcon||"ion-plus",t=n.menuIconColor||"#fff",i=n.menuOpenColor||"#2AC9AA",r=n.menuOpenIcon||"ion-minus",c=n.menuOpenIconColor||"#fff";n.setClose(),n.hasFooter=n.hasFooter||!1,n.hasFooter?n.bottomValue="60px":n.bottomValue="20px"}]}}).directive("ionFloatingItem",function(){return{restrict:"E",require:["^ionFloatingMenu"],scope:{click:"&?",icon:"@",buttonColor:"@?",buttonClass:"@?",iconColor:"@?",text:"@?",textClass:"@?"},template:'<li ng-click="click()" ng-class="buttonClass" ng-style="{\'background-color\': buttonColor }"><span ng-if="text" class="label-container"><span class="label" ng-class="textClass" ng-bind="text"></span></span><i class="icon menu-icon" ng-class="{ \'{{icon}}\' : true}" ng-style="{\'color\': iconColor }"></i></li>',replace:!0,controller:["$scope",function(n){n.buttonColor=n.buttonColor||"#2AC9AA",n.iconColor=n.iconColor||"#fff"}]}}).directive("ionProfilePicture",["$ionicTemplateLoader","$ionicBackdrop","$q","$timeout","$rootScope","$document",function(n,o,e,t,i,r){return{require:"?ngModel",restrict:"E",template:'<div class="ion-profile-picture no-picture"><input type="file" accept="image/*" capture /></div>',replace:!0,link:function(n,o,e,t){var i=angular.element(o.find("input")),r=void 0;if(!t)return console.error("ion-profile-picture:","Need to set ng-model"),!1;var c=function(n){i[0].click()},l=function(o){var e=new FileReader;e.onload=function(o){n.$apply(function(){t.$setViewValue(o.target.result),t.$render()})},r=o.target.files[0],r&&e.readAsDataURL(r)};t.$formatters.unshift(function(n){return n?n:""}),t.$parsers.unshift(function(n){return n}),t.$render=function(){var n=t.$viewValue;n?(n.match(/^data:.*?;base64,/i)||(n="data:image/jpg;base64,"+n),o.css({"background-image":"url("+n+")"}),o.removeClass("no-picture")):(o.css({"background-image":"none"}),o.addClass("no-picture"))},o.on("click",c),i.on("change",l)}}}]).directive("onValidSubmit",["$parse","$timeout",function(n,o){return{require:"^form",restrict:"A",link:function(o,e,t,i){i.$submitted=!1;var r=n(t.onValidSubmit);e.on("submit",function(n){o.$apply(function(){e.addClass("ng-submitted"),i.$submitted=!0,i.$valid&&"function"==typeof r&&r(o,{$event:n})})})}}}]).directive("validated",["$parse","ionicToast",function(n,o){return{restrict:"AEC",require:"^form",link:function(n,e,t,i){for(var r=e.find("*"),c=0;c<r.length;c++)!function(e){var t=e.attributes;if(void 0!=t.getNamedItem("ng-model")&&void 0!=t.getNamedItem("name")){var r=i[t.name.value];void 0!=r&&n.$watch(function(){return i.$submitted+"_"+r.$valid},function(){if(console.log("form.$submitted: ",i.$submitted),1==i.$submitted){if(1==i.$invalid)return void o.show("Field are required!","top",!1,2500);var n=angular.element(e);n.hasClass("ng-invalid")||console.log("else: ",n)}})}}(r[c])}}}])}();